<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Introduction to The Carpentries Workbench: Migrating lessons from the previous infrastructure</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/cp/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicons/cp/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicons/cp/favicon-16x16.png"><link rel="manifest" href="favicons/cp/site.webmanifest"><link rel="mask-icon" href="favicons/cp/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav carpentries"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="cp-logo" alt="The Carpentries" src="assets/images/carpentries-logo.svg"><span class="badge text-bg-info">
          <abbr title="This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-circle" style="border-radius: 5px"></i>
              Beta
            </a>
            <span class="visually-hidden">This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/migrating-from-styles.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav carpentries" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="The Carpentries" src="assets/images/carpentries-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Introduction to The Carpentries Workbench
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Introduction to The Carpentries Workbench
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="reference.html">Learner Reference</a></li><li><a class="dropdown-item" href="github-pat.html">Setting Up a Personal Access Token via R</a></li><li><a class="dropdown-item" href="component-guide.html">Workbench Component Guide</a></li><li><a class="dropdown-item" href="migrating-from-styles.html">Migrating lessons from the previous infrastructure</a></li><li><a class="dropdown-item" href="style.html">Style Guide</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Introduction to The Carpentries Workbench
</div>

<aside class="col-md-12 lesson-progress"><div style="width: NA%" class="percentage">
    NA%
  </div>
  <div class="progress carpentries">
    <div class="progress-bar carpentries" role="progressbar" style="width: NA%" aria-valuenow="NA" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/migrating-from-styles.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="introduction.html">1. Introduction to The Carpentries Workbench</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="episodes.html">2. Episode Structure</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="editing.html">3. Editing a {sandpaper} lesson</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="example.html">4. EXAMPLE: Using RMarkdown</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="deployment.html">5. Lesson Deployment</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="update.html">6. Maintaining a Healthy Infrastructure</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="pull-request.html">7. Auditing Pull Requests</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="reference.html">Learner Reference</a></li><li><a href="github-pat.html">Setting Up a Personal Access Token via R</a></li><li><a href="component-guide.html">Workbench Component Guide</a></li><li><a href="migrating-from-styles.html">Migrating lessons from the previous infrastructure</a></li><li><a href="style.html">Style Guide</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="index.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="index.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="index.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Home
        </a>
        <a class="chapter-link float-end" href="index.html" rel="next">
          Home
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Migrating lessons from the previous infrastructure</h1>
        <p>Last updated on 2025-06-02 |

        <a href="https://github.com/carpentries/sandpaper-docs/edit/main/learners/migrating-from-styles.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<p>This page describes a workflow for semi-automated transition from The
Carpentries old infrastructure to the Workbench. It is based on the
transition workflows and documentation originally written by <a href="https://github.com/zkamvar/" class="external-link">Zhian Kamvar</a>. See the full set of
lesson transition scripts and documentation at <a href="https://github.com/carpentries/lesson-transition" class="external-link uri">https://github.com/carpentries/lesson-transition</a>. Please
contact <a href="mailto:curriculum@carpentries.org">The Carpentries
Curriculum Team</a> with questions about this workflow.</p>
<p>The workflow is intended for use by Carpentries community members who
want to transition their own lesson repository from the old “styles”
infrastructure to use the Workbench.</p>
<p>After following this process you will have replaced the contents of
your current lesson repository with a Workbench version containing the
same lesson content.</p>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p><strong><em>We strongly recommend that you create a backup of your
lesson repository before you follow this workflow.</em></strong></p>
</div>
</div>
</div>
<div class="section level2 prereqs">
<h2 id="prerequisites">Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"></a></h2>
<p>Before following the steps described below, please make sure that you
have done the following:</p>
<ol style="list-style-type: decimal"><li>Enabled push access to GitHub from the command line on your local
system: you will need to have SSH or HTTPS access configured to allow
you to push changes to your GitHub repository from the command line. See
<a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/about-authentication-to-github#authenticating-with-the-command-line" class="external-link"><em>Authenticating
with the command line</em></a> in GitHub’s documentation for more
details and step-by-step guides.</li>
<li>Merged or closed all open pull requests on your lesson repository.
Any open pull requests will be rendered invalid by the migration between
infrastructures.</li>
<li>Installed Git and R on your local system. The workflow described
below assumes that you can call R as a command from a Bash shell
session.</li>
<li>(Optional, but highly recommended) archived a final version of your
lesson in the old infrastructure. Although this workflow has been
documented with recommendations to minimise the chances of accidentally
overwriting your lesson with anything other than a fully-tranisitoned
equivalent, it is still wise to ensure that you have a complete and
up-to-date copy of your lesson as a backup. For example, you could
publish a release to <a href="https://zenodo.org/" class="external-link">Zenodo</a>.</li>
<li>(Optional, but highly recommended) created or synced up a fork of
the lesson. This can be used to test the transitioned lesson on GitHub
before making the final, irreversible changes to your primary lesson
repository. The fork only needs to contain a copy of the default branch
of your lesson (usually <code>gh-pages</code>).</li>
</ol></div>
<hr><section><h2 class="section-heading" id="transition-workflow">Transition Workflow<a class="anchor" aria-label="anchor" href="#transition-workflow"></a></h2>
<hr class="half-width"><ol style="list-style-type: decimal"><li><a href="#workflow-setup">Set up the transition tools</a></li>
<li><a href="#Rscript">Create an Rscript for your lesson</a></li>
<li><a href="#transition">Run the transition tool</a></li>
<li><a href="#github">Set up your GitHub repository to receive the
transitioned lesson</a></li>
<li><a href="#post-transition">Post-transition steps</a></li>
</ol><div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>Note: these steps assume your lesson exists in The Carpentries
Incubator i.e. under the <code>carpentries-incubator</code> organisation
on GitHub. If it does not, you will need to replace all of the folder
names etc below accordingly.</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="workflow-setup">1. Set up the transition tools<a class="anchor" aria-label="anchor" href="#workflow-setup"></a></h3>
<ol style="list-style-type: decimal"><li>
<p>Open a Bash shell and run the following:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/carpentries/lesson-transition.git <span class="kw">&amp;&amp;</span> <span class="bu">cd</span> lesson-transition</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">git</span> switch <span class="at">-c</span> YOUR-LESSON-NAME-transition <span class="co"># provide a branch name appropriate for your lesson, e.g. for the carpentries-incubator/docker-introduction lesson, you would call the branch docker-introduction-transition</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">git</span> submodule update <span class="at">--init</span> git-filter-repo <span class="co"># this will ensure the git-filter-repo tool is available</span></span></code></pre>
</div>
</li>
<li>
<p>Install dependencies for lesson transition tool:</p>
<ul><li><p>If you already have <code>renv</code> installed on your system:
open R in this directory (run the <code>R</code> command in Bash),
answer <code>y</code> to the prompt
<code>Would you like to restore the project library?</code>, wait for
the project setup to complete, then exit R</p></li>
<li>
<p>If you do not yet have <code>renv</code> installed: open R in
this directory (run the <code>R</code> command in Bash), then run the
following:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">'renv'</span><span class="op">)</span> <span class="co"># enter 'y' to complete the installation</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="st">'renv'</span><span class="op">)</span></span>
<span><span class="fu">renv</span><span class="fu">::</span><span class="fu">restore</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>or run the following commands in Bash:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">Rscript</span> <span class="at">-e</span> <span class="st">"install.packages('renv')"</span> <span class="co"># enter 'y' to complete the installation</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">Rscript</span> <span class="at">-e</span> <span class="st">"library('renv')"</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="ex">Rscript</span> <span class="at">-e</span> <span class="st">"renv::restore()"</span></span></code></pre>
</div>
</li>
</ul></li>
<li>
<p>Returning to Bash (you can quit R by calling the <code>q()</code>
function), run the following:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">Rscript</span> establish-template.R template/</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">git</span> submodule add <span class="at">--force</span> <span class="at">-b</span> gh-pages https://github.com/carpentries-incubator/YOUR-LESSON-NAME carpentries-incubator/YOUR-LESSON-NAME <span class="co"># replace YOUR-LESSON-NAME with the name of your lesson, and replace 'gh-pages' with 'main' if main is the default branch for your lesson</span></span></code></pre>
</div>
</li>
</ol></div>
<div class="section level3">
<h3 id="Rscript">2. Create an Rscript for your lesson<a class="anchor" aria-label="anchor" href="#Rscript"></a></h3>
<p>The transition tool requires an R script to exist for any lesson it
migrates to the new infrastrucure. In the large-scale transition of
Carpentries lessons, these R scripts were used to handle various edge
cases, customisations to the standard Markdown syntax, etc that existed
in every lesson but were unique to each.</p>
<p>The script is run on the version of the Workbench lesson created by
the transition tool, as a kind of post-processing step before the
changes made by the transition are committed. Any changes made by the
script will appear as if carried out by the transition tool, thereby
avoiding additional commits in your project history associated with
“cleaning up” after the migration.</p>
<p>It is sufficient to create an empty file, named appropriately. This
is available in the add-lesson.sh file, which will also provide hints
about how the data can be transformed.</p>
<div id="caution1" class="callout caution">
<div class="callout-square">
<i class="callout-icon" data-feather="alert-triangle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Caution</h3>
<div class="callout-content">
<p>It is essential that you do not include a trailing <code>/</code>
after YOUR-LESSON-NAME below.)</p>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">bash</span> add-lesson.sh carpentries-incubator/YOUR-LESSON-NAME</span></code></pre>
</div>
<p>But you may wish to populate this script with some function calls to
clean up various common artifacts produced by the transition, or to
preserve any <a href="#custom-workflows">custom workflows</a> you have
added to your lesson repository. Look at the <code>.R</code> scripts in
the <a href="https://github.com/carpentries/lesson-transition/tree/main/carpentries-incubator" class="external-link"><code>carpentries-incubator/</code></a>,
<a href="https://github.com/carpentries/lesson-transition/tree/main/datacarpentry" class="external-link"><code>datacarpentry</code></a>,
<a href="https://github.com/carpentries/lesson-transition/tree/main/librarycarpentry" class="external-link"><code>librarycarpentry</code></a>,
and <a href="https://github.com/carpentries/lesson-transition/tree/main/swcarpentry" class="external-link"><code>swcarpentry</code></a>
directories of the <code>lesson-transition</code> repository for
inspiration.</p>
</div>
<div class="section level3">
<h3 id="transition">3. Run the transition tool<a class="anchor" aria-label="anchor" href="#transition"></a></h3>
<div class="section level4">
<h4 id="try-this-first">Try this first<a class="anchor" aria-label="anchor" href="#try-this-first"></a></h4>
<p>In Bash, run the release process via <code>make</code> to save
yourself some work:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">make</span> release/carpentries-incubator/YOUR-LESSON-NAME.json</span></code></pre>
</div>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>Notes:</p>
<ul><li>the <code>YOUR-LESSON-NAME.json</code> file does not need to exist
for these commands to run</li>
<li>if you would like to run a test first, you can use
<code>make sandpaper/carpentries-incubator/YOUR-LESSON-NAME.json</code>,
which will create a ‘beta test’ version of the transitioned lesson in
the <code>carpentries-incubator</code> folder.</li>
</ul></div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="if-that-doesnt-work">If that doesn’t work…<a class="anchor" aria-label="anchor" href="#if-that-doesnt-work"></a></h4>
<p>Try running the process step-by-step:</p>
<ol style="list-style-type: decimal"><li>
<p>In Bash, run:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">bash</span> filter-and-transform.sh release/carpentries-incubator/YOUR-LESSON-NAME.json carpentries-incubator/YOUR-LESSON-NAME.R <span class="va">$(</span><span class="fu">readlink</span> <span class="at">-f</span> ./filter-list.txt<span class="va">)</span> <span class="st">'return message'</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="bu">cd</span> release/carpentries-incubator/YOUR-LESSON-NAME</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="va">LESSONNAME</span><span class="op">=</span><span class="kw">`</span><span class="bu">pwd</span> <span class="kw">|</span> <span class="fu">rev</span> <span class="kw">|</span> <span class="fu">cut</span> <span class="at">-d</span>/ <span class="at">-f1</span> <span class="kw">|</span> <span class="fu">rev</span><span class="kw">`</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="cf">for</span> FILENAME <span class="kw">in</span> commit-map ref-map suboptimal-issues</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>    <span class="fu">cp</span> .git/filter-repo/<span class="va">$FILENAME</span> ../<span class="va">$LESSONNAME</span>-<span class="va">$FILENAME</span>.hash</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="cf">done</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="fu">egrep</span> <span class="st">' 0{40}$'</span> .git/filter-repo/commit-map <span class="kw">|</span> <span class="fu">cut</span> <span class="at">-d</span><span class="st">' '</span> <span class="at">-f1</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-1</span> <span class="op">&gt;</span> ../<span class="va">$LESSONNAME</span>-invalid.hash</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="cf">if</span> <span class="bu">[</span> <span class="ot">!</span> <span class="ot">-s</span> ../<span class="va">$LESSONNAME</span>-invalid.hash <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span> <span class="fu">rm</span> ../<span class="va">$LESSONNAME</span>-invalid.hash<span class="kw">;</span><span class="cf">fi</span></span></code></pre>
</div>
</li>
<li>
<p>Adjust lesson config file</p>
<ul><li><p><strong>Option 1 (manual):</strong> Using your favourite text
editor, open the <code>config.yaml</code> file and remove the lines
setting the <code>workbench-beta</code>, <code>analytics</code>,
<code>lang</code>, and <code>url</code> parameters.</p></li>
<li>
<p><strong>Option 2 (using regular expressions):</strong> In Bash,
run:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-v</span> <span class="at">-E</span> <span class="st">'^workbench-beta|^analytics|^lang|^url'</span> config.yaml <span class="op">&gt;</span> config-filtered.yaml <span class="kw">&amp;&amp;</span> <span class="fu">mv</span> config-filtered.yaml config.yaml</span></code></pre>
</div>
</li>
</ul></li>
<li>
<p>Set the correct address for your origin remote repository. In
Bash, run:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">git</span> remote set-url origin ADDRESS-OF-YOUR-REMOTE <span class="co"># replace ADDRESS-OF-YOUR-REMOTE to set origin to the correct address for your lesson repository on GitHub</span></span></code></pre>
</div>
</li>
</ol><div id="custom-workflows" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="custom-workflows" class="callout-inner">
<h3 class="callout-title">Custom workflow files</h3>
<div class="callout-content">
<p>The contents of the <code>.github</code> folder are not preserved by
the transition tool. If you had any custom workflow files in your lesson
repository before migrating to the new infrastructure, you will need to
add those back into <code>.github/workflows/</code> at this point then
commit the changes. (You could also modify the Rscript for your lesson
transition to do this for you, and repeat the transition process to
include it.)</p>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="build-and-check-your-transitioned-lesson">Build and check your transitioned lesson<a class="anchor" aria-label="anchor" href="#build-and-check-your-transitioned-lesson"></a></h4>
<p>At this stage, the
<code>release/carpentries-incubator/YOUR-LESSON-NAME/</code> directory
should contain a transitioned version of your lesson. To check how
things are looking, <a href="index.html#installation">install the
Workbench tools for your system</a>, then open R in this directory and
run <code>sandpaper::serve()</code>.</p>
</div>
<div class="section level4">
<h4 id="optional-update-your-lessons-r-script-to-produce-a-smoother-transition">Optional: update your lesson’s R script to produce a smoother
transition<a class="anchor" aria-label="anchor" href="#optional-update-your-lessons-r-script-to-produce-a-smoother-transition"></a></h4>
<p>While previewing this transitioned lesson site, you might see some
problems in the content of your lesson site that appeared during the
migration. Liquid comments (delineated by <code>{% comment %}</code> and
<code>{% endcomment %}</code> tags) are one commonly-encountered
artifact. Another is broken links to the lesson setup instructions,
which are found at <code>index.html#setup</code> in a Workbench site.
These can be fixed by editing the lesson after transition, but for a
cleaner commit history on your lesson you might wish to delete the
transitioned lesson directory (inside the <code>release</code> folder),
modify the R script for your lesson to handle those issues, and re-run
the transition tool. (See <a href="#Rscript"><em>Create an Rscript for
your lesson</em></a> above.)</p>
</div>
<div class="section level4">
<h4 id="if-something-goes-wrong">If something goes wrong<a class="anchor" aria-label="anchor" href="#if-something-goes-wrong"></a></h4>
<p>To go back to the start and try again, delete the directory for your
lesson within the <code>release/</code> directory,
i.e. <code>rm -rf release/carpentries-incubator/YOUR-LESSON-NAME</code>.</p>
<p>If the transition tool ran successfully but your lesson build fails,
this is usually due to customisations made to the lesson that fall
outside what the transition tool expected to find. If you run into
problems, we recommend that you try to identify differences between
yours and a typical lesson repository (the <a href="https://github.com/carpentries/workbench-template-md" class="external-link">Workbench
Markdown template</a> and <a href="https://github.com/carpentries/workbench-template-rmd" class="external-link">R Markdown
template</a> are good examples) and experiment to see if any of those
are causing the site build to fail.</p>
<p>If something goes wrong and you cannot debug the problem on your own,
post a message to the <code>#workbench</code> channel on The Carpentries
Slack workspace, or reach out to the Curriculum Team by email (<a href="mailto:curriculum@carpentries.org" class="email">curriculum@carpentries.org</a>). Try to provide as much
information as you can, including any error messages and logging
information that were produced when you ran the steps described above.
We will do our best to help you but please note that the Core Team’s
capacity to provide support for transition of community lessons is
severely limited.</p>
</div>
</div>
<div class="section level3">
<h3 id="github">4. Set up your GitHub repository to receive the transitioned
lesson<a class="anchor" aria-label="anchor" href="#github"></a></h3>
<div id="callout5" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p><strong>We recommend that you try these steps out on a fork of your
lesson first</strong>, so that you can be certain everything works
before making permanent changes to your main lesson repository.</p>
</div>
</div>
</div>
<ol style="list-style-type: decimal"><li>
<p>Adjust the <code>config.yaml</code>:</p>
<ul><li>Record your lesson creation date in config.yaml: run
<code>git log</code> and hit <kbd>Shift+G</kbd> to jump to end of file,
note down the date when the first commit was made. Then, using your
favourite text editor, open <code>config.yaml</code> and modify the
<code>created</code> field by replacing <code>~</code> with this
creation date in YYYY-MM-DD format.</li>
<li>Check the <code>source</code> URL specified in
<code>config.yaml</code>: this may be set incorrectly during the
transition process. Adjust it to the correct URL for your lesson source
repository on GitHub.</li>
</ul></li>
<li>
<p>Commit the changes you made to the lesson config file:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">git</span> add config.yaml</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">'complete configuration of Workbench lesson site'</span></span></code></pre>
</div>
</li>
<li>
<p>Rename the branches of your project:</p>
<ul><li>On your GitHub repository, rename the <code>gh-pages</code> branch
to <code>legacy/gh-pages</code> (if <code>main</code> is your default
branch, also rename that to <code>legacy/main</code>).
<ul><li>Branches can be renamed by going to the list of all branches on your
repository (add <code>/branches/all</code> to the end of the URL for
your GitHub repository e.g. <a href="https://github.com/datacarpentry/image-processing/branches/all" class="external-link uri">https://github.com/datacarpentry/image-processing/branches/all</a>)
and selecting the pencil icon button next to the relevant branch in that
listing.</li>
</ul></li>
</ul></li>
<li>
<p>In Bash on your local system (make sure you are working in the
root of the <code>release/carpentries-incubator/YOUR-LESSON-NAME</code>
directory), run the following commands (please read the comments that
annotate these commands and note that <strong>we strongly recommend that
you execute these one-at-a-time!</strong>):</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">git</span> remote <span class="at">-v</span> <span class="co"># check the names and addresses of your remote repositories: if you are testing on a fork and it is not listed here, add it with 'git remote add' https://git-scm.com/docs/git-remote#Documentation/git-remote.txt-emaddem</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="fu">git</span> fetch <span class="at">--prune</span> origin <span class="co"># this assumes your remote is called origin - if you are testing on a fork, use the name of that remote here instead</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="fu">git</span> checkout <span class="at">--orphan</span> gh-pages <span class="co"># set up gh-pages branch</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="co"># double-check that you are in the root of your lesson within the lesson-transition/release folder (e.g. if transitioning carpentries-incubator/docker-introduction, you should be in lesson-transition/release/carpentries-incubator/docker-introduction/)</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="fu">git</span> rm <span class="at">-rf</span> .</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> .github/workflows/</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-o</span> .github/workflows/close-pr.yaml https://raw.githubusercontent.com/carpentries/lesson-transition/main/close-pr.yaml <span class="co"># download the workflow that will auto-close invalid PRs to gh-pages</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="fu">git</span> add .github/workflows/close-pr.yaml</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">--allow-empty</span> <span class="at">-m</span> <span class="st">'Initialising gh-pages branch'</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="fu">git</span> push <span class="at">--force</span> origin HEAD:gh-pages</span></code></pre>
</div>
</li>
<li>
<p>If everything has gone well up to this point, it is time to go
back to the <code>main</code> branch and force push its contents to
GitHub:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">git</span> switch main</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="fu">git</span> push <span class="at">--force</span> <span class="at">--set-upstream</span> origin main <span class="co"># force push the transitioned main branch to your GitHub repository</span></span></code></pre>
</div>
</li>
<li>
<p>On your GitHub repository:</p>
<ul><li>set the default branch to <code>main</code> (in
Settings-&gt;General, click the button with two arrows next to the name
of the default branch)</li>
<li>in Settings-&gt;Branches, add rules to protect the <code>main</code>
branch (require pull requests) and lock <code>legacy/*</code>
</li>
<li>make sure that your lesson site is being served with GitHub Pages
from the root folder of the gh-pages branch (in Settings-&gt;Pages,
under <em>Build and deployment</em>, ensure that <code>gh-pages</code>
is selected with the dropdown under <em>Branch</em> and that
<code>/ (root)</code> is the folder selected, then hit the <em>Save</em>
button)</li>
</ul></li>
</ol><p>If all of the above worked, you should now have a Workbench version
of your lesson.</p>
</div>
<div class="section level3">
<h3 id="post-transition">5. Post-transition steps<a class="anchor" aria-label="anchor" href="#post-transition"></a></h3>
<p>After you have transitioned your lesson, you should:</p>
<ol style="list-style-type: decimal"><li>
<strong>Delete and re-create any forks and local clones</strong> of
your lesson project, to minimise the likelihood that you will
accidentally push the old project history back to the GitHub repository.
If you have any collaborators and fellow lesson developers/maintainers,
ask them to do the same.</li>
<li>If your lesson is in The Carpentries Incubator, <a href="mailto:curriculum@carpentries.org"><strong>tell the Curriculum
Team</strong></a> that you have completed the transition so that we can
activate the automated creation of pull requests to update the Workbench
infrastructure when new versions of the packages are released.</li>
<li>If your lesson is <em>not</em> in the Incubator, <strong>enable
automated pull requests to keep your infrastructure updated</strong> by
adding a SANDPAPER_WORKFLOW token to your repository:
<ul><li>Navigate to <a href="https://github.com/settings/tokens/new" class="external-link uri">https://github.com/settings/tokens/new</a> and give your new
token a name (e.g. “Sandpaper Token
(YOUR-ORG-OR-USER-NAME/YOUR-LESSON-NAME)”).</li>
<li>Check the box next to <em>workflow</em>.</li>
<li>Set an expiry date for the token.</li>
<li>Select <em>Generate token</em>.</li>
<li>Copy the token displayed on the screen.</li>
<li>On your GitHub repository:
<ul><li>Navigate to Settings-&gt;Secrets and variables-&gt;Actions-&gt;New
repository secret</li>
<li>Set <em>Name</em> to SANDPAPER_WORKFLOW, and paste your new token
into the <em>Secret</em> box.</li>
<li>Select Add secret</li>
</ul></li>
</ul></li>
</ol><p>The maintenance workflows that use this token are scheduled to run
weekly. When The Carpentries releases new versions of the workflow files
used to build and maintain lessons, a pull request will be opened
automatically on any repository with the SANDPAPER_WORKFLOW token set to
incorporate the relevant updates. If your lesson uses R Markdown source
files, the same token will be used to keep the package dependencies for
your lesson updated. 5. (Optional, but highly recommended) Open a pull
request to <a href="https://github.com/carpentries/reactables/" class="external-link uri">https://github.com/carpentries/reactables/</a> to
<strong>add the invalid commit hash</strong> (in the
<code>invalid.hash</code> file created for your lesson during the
transition (step 3 above)) to <a href="https://github.com/carpentries/reactables/blob/main/workbench/invalid-hashes.json" class="external-link">the
<code>workbench/invalid-hashes.json</code> file</a>. This will include
the hash in the data feed used by our infrastructure to support the
GitHub Actions workflow that will automatically close any pull requests
opened to your repository from a branch containing the old project
history. To do this: * Make a fork of <a href="https://github.com/carpentries/reactables/" class="external-link">the
<code>carpentries/reactables</code> GitHub repository</a> * On a new
branch of that fork, edit the <code>workbench/invalid-hashes.json</code>
file, adding a new line before the final <code>}</code> line matching
the format of the other lines containing hashes, i.e. 
<code>"carpentries-incubator/YOUR-LESSON-NAME": "HASHASHASHASHASHASHASH"</code>
where <code>HASHASHASHASHASHASHASH</code> is the hash contained in the
<code>release/carpentries-incubator/YOUR-LESSON-NAME-invalid.hash</code>
file created during the infrastructure transition. Make sure to add a
comma <code>,</code> to the end of the preceding line to ensure the
validity of the JSON file. * commit the change, then open a pull request
back to <code>carpentries/reactables</code> to suggest that we merge
your invalid hash into our data feed. A member of the Curriculum Team
will review and merge your changes.</p>
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="index.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="index.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="index.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Home
        </a>
        <a class="chapter-link float-end" href="index.html" rel="next">
          Home
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/carpentries/sandpaper-docs/edit/main/learners/migrating-from-styles.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/carpentries/sandpaper-docs/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/carpentries/sandpaper-docs/" class="external-link">Source</a></p>
				<p><a href="https://github.com/carpentries/sandpaper-docs/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:tobyhodges@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper" class="external-link">sandpaper (0.16.12.9000)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish" class="external-link">varnish (1.0.6.9000)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://carpentries.github.io/sandpaper-docs/migrating-from-styles.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "static site, lesson template, markdown, R, software",
  "name": "Migrating lessons from the previous infrastructure",
  "creativeWorkStatus": "active",
  "url": "https://carpentries.github.io/sandpaper-docs/migrating-from-styles.html",
  "identifier": "https://carpentries.github.io/sandpaper-docs/migrating-from-styles.html",
  "dateCreated": "2025-06-02",
  "dateModified": "2025-06-02",
  "datePublished": "2025-06-02"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

